<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Teachers' Report</title>
    <style>
        body { font-family: sans-serif; max-width: 800px; margin: 20px auto; padding: 20px; background: #f0f2f5; }
        .card { background: white; padding: 25px; border-radius: 12px; shadow: 0 4px 6px rgba(0,0,0,0.1); }
        input, textarea, select { width: 100%; padding: 10px; margin: 8px 0; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
        table { width: 100%; border-collapse: collapse; margin: 15px 0; }
        th, td { border: 1px solid #ddd; padding: 8px; }
        .btn-submit { background: #27ae60; color: white; border: none; padding: 15px; width: 100%; font-size: 1.1em; cursor: pointer; border-radius: 6px; margin-top: 10px; }
        .btn-submit:hover { background: #219150; }
    </style>
</head>
<body>

<div class="card">
    <h2>Daily Teachers' Report</h2>
    <input type="date" id="reportDate">
    <input type="text" id="teacher" placeholder="Teacher's Name">
    <input type="text" id="grade" placeholder="Class/Grade">

    <h3>Attendance Summary</h3>
    <table>
        <tr><th>Total</th><th>Present</th><th>Absent</th></tr>
        <tr>
            <td><input type="number" id="total" oninput="calc()"></td>
            <td><input type="number" id="present" oninput="calc()"></td>
            <td><input type="number" id="absent" readonly></td>
        </tr>
    </table>

    <textarea id="discipline" placeholder="Disciplinary Issues"></textarea>
    <textarea id="health" placeholder="Health, Safety & Welfare Complaints"></textarea>
    <textarea id="comments" placeholder="General Comments"></textarea>

    <button class="btn-submit" onclick="submitData()" id="submitBtn">Submit to Google Sheet</button>
</div>

<script>
    // Replace this with your copied Web App URL
    const WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbw8_Ob8O5N6eRJcngiZwPaGbEu0LAdcyR1SwGAanIRryPq51Qr-tBwcyYc1g318_LFP/exec';

    document.getElementById('reportDate').valueAsDate = new Date();

    function calc() {
        const t = document.getElementById('total').value || 0;
        const p = document.getElementById('present').value || 0;
        document.getElementById('absent').value = t - p;
    }

    async function submitData() {
        const btn = document.getElementById('submitBtn');
        btn.disabled = true;
        btn.innerText = "Sending...";

        const payload = {
            date: document.getElementById('reportDate').value,
            teacher: document.getElementById('teacher').value,
            grade: document.getElementById('grade').value,
            total: document.getElementById('total').value,
            present: document.getElementById('present').value,
            absent: document.getElementById('absent').value,
            discipline: document.getElementById('discipline').value,
            health: document.getElementById('health').value,
            comments: document.getElementById('comments').value
        };

        try {
            await fetch(WEB_APP_URL, {
                method: 'POST',
                mode: 'no-cors', // Essential for Google Apps Script
                body: JSON.stringify(payload)
            });
            alert("Report successfully sent to Google Sheets!");
            btn.innerText = "Submit to Google Sheet";
            btn.disabled = false;
        } catch (e) {
            alert("Error: " + e.toString());
            btn.disabled = false;
        }
    }
</script>

</body>
</html>
